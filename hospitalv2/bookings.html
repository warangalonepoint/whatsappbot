
<!doctype html><html lang="en" data-theme="light">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Bookings – CSV Demo</title><link rel="stylesheet" href="styles.css"/><script src="js/csv.js"></script></head>
<body><div class="wrap">
<header class="banner"><a class="chip floating-toggle" href="admin.html">← Admin</a></header>
<section class="card"><h2>Bookings</h2>
  <div class="row"><button class="btn" id="add">Add Booking</button></div>
  <table id="tbl"></table>
</section></div>
<script>
function render(){
  const rows=[['Token','Date','Time','Patient','Status']].concat(
    CsvDB.all('bookings').map(b=>[b.token_no||'',b.booking_date||'',b.slot_time||'',b.patient_id||'',b.status||'pending'])
  );
  document.getElementById('tbl').innerHTML=rows.map((r,i)=>'<tr>'+r.map(c=>`<${i?'td':'th'}>${c}</${i?'td':'th'}>`).join('')+'</tr>').join('');
}
document.getElementById('add').onclick=()=>{
  const id='b'+Math.random().toString(36).slice(2,8);
  CsvDB.insert('bookings',{id,token_no:String((CsvDB.all('bookings').length||0)+1),booking_date:new Date().toISOString().slice(0,10),slot_time:'10:30',patient_id:'p1',status:'pending'});
  render();
}; render();
</script>
</body></html>
